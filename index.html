<script>
// ===== CONFIG =====
const SELLER_WA = '525636364089';
const money = n => `$${Number(n).toFixed(2)}`;

// ===== DATA (menú de la captura) =====
const menuItems = [
  // Alitas
  { cat:'Alitas', nombre:'Alitas (7 pz)', precio:75,  desc:'Lechuga, zanahoria, pepino, aderezo' },
  { cat:'Alitas', nombre:'Alitas (12 pz)', precio:110, desc:'Lechuga, zanahoria, pepino, aderezo' },
  { cat:'Alitas', nombre:'Alitas (24 pz)', precio:205, desc:'Lechuga, zanahoria, pepino, aderezo' },
  // Combos
  { cat:'Combos', nombre:'Capy Gusto',      precio:115, desc:'Alitas (7 pz) + Papas fritas' },
  { cat:'Combos', nombre:'Capy Caja Loca',  precio:150, desc:'Alitas (12 pz) + Papas fritas' },
  { cat:'Combos', nombre:'Capy Fiesta',     precio:245, desc:'Alitas (24 pz) + Papas fritas' },
  { cat:'Combos', nombre:'Capy Mordida Max',precio:105, desc:'Hamburguesa clásica + Papas fritas' },
  { cat:'Combos', nombre:'Combo Chill',     precio:130, desc:'Hamburguesa doble carne + Papas fritas' },
  { cat:'Combos', nombre:'Capialitas… ¡Unidos!', precio:335, desc:'5 Mini Hamburguesas + 5 Mini Banderillas + Papas + Hamburguesa clásica + Alitas (300g)' },
];

// ===== ESTADO =====
let cart = [];

// ===== RENDER MENÚ =====
function renderMenu(){
  const container = document.getElementById('menu');
  container.innerHTML = '';

  const cats = ['Alitas','Combos'];
  cats.forEach(cat=>{
    // Card de categoría
    const card = document.createElement('div');
    card.className = 'menu-card';
    card.innerHTML = `
      <div class="menu-card__wrap">
        <h2 class="menu-title">${cat}</h2>
        <div class="menu-list"></div>
      </div>`;
    container.appendChild(card);

    const list = card.querySelector('.menu-list');
    menuItems.filter(i=>i.cat===cat).forEach((item, idx)=>{
      const row = document.createElement('div');
      row.className = 'menu-row';
      row.innerHTML = `
        <div class="menu-info">
          <div class="item-name">${item.nombre}</div>
          <div class="item-desc">${item.desc||''}</div>
        </div>
        <div class="item-price">${money(item.precio)}</div>
        <button class="add-btn" data-idx="${menuItems.indexOf(item)}">Agregar</button>
      `;
      list.appendChild(row);
    });
  });

  // botones Agregar
  document.querySelectorAll('.add-btn').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const i = parseInt(btn.dataset.idx,10);
      addToCart(menuItems[i]);
    });
  });
}

// ===== CARRITO =====
function addToCart(item){
  // permite repetir el mismo producto varias veces
  cart.push({ nombre:item.nombre, precio:item.precio, qty:1 });
  renderCart();
}

function renderCart(){
  const ul = document.getElementById('cartList');
  const totalEl = document.getElementById('cartTotal');
  ul.innerHTML = '';
  let total = 0;

  cart.forEach((it, i)=>{
    total += it.precio * it.qty;
    const li = document.createElement('li');
    li.className = 'cart-item';
    li.innerHTML = `
      ${it.qty}× ${it.nombre}
      <span>${money(it.precio * it.qty)}</span>
    `;
    ul.appendChild(li);
  });

  totalEl.textContent = money(total);
}

// ===== CHECKOUT (WhatsApp) =====
function checkout(){
  if(cart.length===0){ alert('Tu carrito está vacío'); return; }
  const lines = cart.map(i=>`${i.qty}× ${i.nombre} - ${money(i.precio*i.qty)}`);
  const total = cart.reduce((s,i)=>s+i.precio*i.qty,0);
  lines.push(`Total: ${money(total)}`);
  const text = encodeURIComponent(lines.join('\\n'));
  window.open(`https://wa.me/${SELLER_WA}?text=${text}`, '_blank');
}

// ===== ESTILOS RÁPIDOS (clases usadas arriba) =====
const style = document.createElement('style');
style.textContent = `
  .menu-card { background:#fff; border:1px solid #f2d0d0; border-radius:16px; box-shadow:0 8px 24px rgba(0,0,0,.06); margin:14px 0; }
  .menu-card__wrap { padding:16px 18px; }
  .menu-title { color:#e43b3b; font-weight:800; font-size:20px; margin-bottom:6px; }
  .menu-list { display:flex; flex-direction:column; }
  .menu-row { display:flex; align-items:center; gap:10px; padding:10px 0; border-top:1px solid #ffe0e0; }
  .menu-row:first-child { border-top:0; }
  .menu-info { flex:1; }
  .item-name { font-weight:700; }
  .item-desc { font-size:13px; color:#6b7280; }
  .item-price { width:70px; text-align:right; font-weight:700; }
  .add-btn { background:#e43b3b; color:#fff; border:0; border-radius:12px; padding:8px 14px; font-weight:700; cursor:pointer; }
  .add-btn:active { transform:scale(.98); background:#c92828; }
`;
document.head.appendChild(style);

// ===== INICIO =====
renderMenu();
renderCart();
</script>

