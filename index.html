<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Capialitas Jaz — Menú</title>
<style>
  :root{
    --bg:#fff6ee;
    --card:#ffffff;
    --brand:#e23c3c;     /* rojo botón */
    --brand-2:#f49c24;   /* naranja */
    --ink:#2b2b2b;
    --muted:#6b7280;
    --ring:#ffd2c6;
    --chip:#ffe7d7;
  }
  *{box-sizing:border-box}
  body{
    margin:0;background:var(--bg);color:var(--ink);
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
  }
  /* Header tipo app */
  .appbar{
    position:sticky;top:0;z-index:10;
    background:linear-gradient(180deg,#ffe9db,transparent);
    border-bottom:1px solid #f8d3c7;
    backdrop-filter:saturate(1.1) blur(2px);
  }
  .appbar__inner{
    max-width:1100px;margin:auto;display:flex;align-items:center;gap:14px;
    padding:12px 16px;
  }
  .logo{
    width:56px;height:56px;border-radius:14px;overflow:hidden;
    box-shadow:0 6px 18px rgba(226,60,60,.15);
    background:#fff;border:1px solid #ffdbc8;display:grid;place-items:center;
  }
  .logo img{width:100%;height:100%;object-fit:cover;display:block}
  .brand{
    display:flex;flex-direction:column;gap:2px;
  }
  .brand h1{
    margin:0;font-size:28px;line-height:1;font-weight:800;color:var(--brand);
    letter-spacing:.3px;
  }
  .brand small{color:#c27767;font-weight:600}

  /* Layout */
  .wrap{max-width:1100px;margin:auto;padding:16px}
  .grid{
    display:grid;gap:18px;
    grid-template-columns: 1.25fr .95fr;
  }
  @media (max-width: 940px){
    .grid{grid-template-columns:1fr}
  }

  /* Cards */
  .card{
    background:var(--card);border:1px solid #f5d6cd;border-radius:16px;
    box-shadow:0 10px 32px rgba(0,0,0,.06);
  }
  .card__hd{padding:14px 18px;border-bottom:1px solid #f5d6cd}
  .card__hd h2{margin:0;color:var(--brand-2);font-size:22px}
  .card__bd{padding:14px 18px}

  /* Menu */
  .block + .block{margin-top:16px}
  .title{font-weight:800;color:#e24a3f;margin:2px 0 10px}
  .row{
    display:grid;grid-template-columns:1fr auto auto;gap:10px;align-items:center;
    padding:10px 0;border-top:1px solid #ffe0d9;
  }
  .row:first-child{border-top:0}
  .price{font-weight:800}
  .qty{width:78px}
  .btn{
    background:var(--brand);color:#fff;border:0;border-radius:12px;
    padding:9px 14px;font-weight:800;cursor:pointer
  }
  .btn:active{transform:scale(.98)}
  .chips{display:flex;flex-wrap:wrap;gap:8px}
  .chip{
    display:inline-flex;align-items:center;gap:8px;
    padding:8px 10px;border-radius:12px;background:var(--chip);
    border:1px solid #ffd9c9
  }
  .chip input{transform:translateY(1px)}

  /* Cart */
  .cart-row{display:flex;justify-content:space-between;gap:8px;padding:10px 0;border-top:1px dashed #f1c9bf}
  .cart-row:first-child{border-top:0}
  .muted{color:var(--muted);font-size:13px}
  .tot{display:flex;justify-content:space-between;font-weight:800;padding-top:10px}
  .mini{display:flex;gap:6px;align-items:center}
  .iconbtn{
    width:28px;height:28px;border-radius:8px;border:1px solid #ffd4c8;background:#fff;cursor:pointer
  }
  .cta{margin-top:12px;width:100%}

  /* Form */
  .f{display:flex;flex-direction:column;gap:10px}
  .f input,.f select,.f textarea{
    width:100%;padding:10px 12px;border:1px solid #f2cfca;border-radius:10px;outline:none
  }
  .help{font-size:12px;color:#b85c4f}
  .warn{font-size:13px;color:#b10000;background:#ffe6e6;border:1px solid #ffcccc;padding:8px 10px;border-radius:8px}
</style>
</head>
<body>

<header class="appbar">
  <div class="appbar__inner">
    <div class="logo"><img id="logo" alt="Capialitas Jaz"></div>
    <div class="brand">
      <h1>Capialitas Jaz</h1>
      <small>Alitas con sabor y ternura</small>
    </div>
  </div>
</header>

<main class="wrap grid">
  <!-- MENÚ -->
  <section class="card" id="menuCard">
    <div class="card__hd"><h2>Menú</h2></div>
    <div class="card__bd" id="menu"></div>
  </section>

  <!-- CARRITO + FORM -->
  <aside class="card">
    <div class="card__hd"><h2>Tu pedido</h2></div>
    <div class="card__bd">
      <div id="cart"></div>
      <div class="tot"><span>Subtotal</span><span id="subtotal">$0.00</span></div>

      <h3 class="title">Datos de entrega</h3>
      <div class="f">
        <input id="nombre" placeholder="Nombre de quien recibe">
        <input id="direccion" placeholder="Dirección de entrega (calle, número, colonia)">
        <select id="zona">
          <option value="">Selecciona zona</option>
          <option>Juárez</option><option>Cadete Molino</option><option>Plan de Ayala</option>
          <option>San Antonio Zomeyucan</option><option>Bonfil</option><option>San Bartolo</option>
          <option>Martires del Rio Blanco</option><option>Otra</option>
        </select>
        <div id="zonaWarn" class="warn" style="display:none">⚠ Posible fuera de zona</div>
        <input id="cuando" type="datetime-local">
        <div class="help">Horario de servicio: <b>Viernes, Sábado y Domingo, 4:00–9:00 p.m.</b></div>

        <h4 class="title" style="margin-top:8px">Método de pago</h4>
        <label class="chip"><input type="radio" name="pago" value="transferencia" checked> Transferencia</label>
        <label class="chip"><input type="radio" name="pago" value="mitad"> Mitad transferencia / mitad efectivo</label>

        <textarea id="notas" rows="3" placeholder="Notas (sin pan, extra picante, referencia, etc.)"></textarea>
        <button class="btn cta" id="whatsBtn">Enviar por WhatsApp</button>
      </div>
    </div>
  </aside>
</main>

<script>
/* ================== LOGO (DATA URI) ===================
   Pega AQUÍ tu cadena base64 COMPLETA (la que me diste),
   cambiando el prefijo a:  data:image/jpeg;base64,
   Ejemplo:
   const LOGO_DATA_URI = "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD...";
*/
const LOGO_DATA_URI = "data:image/jpeg;base64,PASTE_TU_BASE64_AQUI";

/* ================== CONFIG ================== */
const SELLER_WA = "525636364089";
const money = n => `$${Number(n).toFixed(2)}`;
const isServiceOpen = d => {
  if (!d) return false;
  const day = d.getDay(); // 0 dom .. 6 sab
  const h = d.getHours();
  const isFSD = (day===5 || day===6 || day===0); // vie, sab, dom
  return isFSD && h>=16 && h<21;
};

/* ================== MENÚ ================== */
const ING_BASE = ["Mayonesa","Catsup","Mostaza","Lechuga","Chiles jalapeño","Jitomate","Cebolla caramelizada","Queso Chihuahua"];
const SABORES = ["Tamarindo","BBQ","Parmesano","Mango Habanero"];
const ALITAS_BASE = ["Lechuga","Zanahoria","Pepino","Jugo Maggi","Salsa inglesa","Aderezo Ranch"];

const MENU = [
  {cat:"Hamburguesas", nombre:"Hamburguesa sencilla", precio:65, toppings:ING_BASE},
  {cat:"Hamburguesas", nombre:"Hamburguesa doble carne", precio:95, toppings:ING_BASE.filter(i=>i!=="Queso Chihuahua")}, // precio actualizado
  {cat:"Alitas", nombre:"Alitas 7 pz", precio:75, toppings:ALITAS_BASE, sabores:SABORES, mitad:true},
  {cat:"Alitas", nombre:"Alitas 12 pz", precio:115, toppings:ALITAS_BASE, sabores:SABORES, mitad:true},
  {cat:"Alitas", nombre:"Alitas 24 pz", precio:210, toppings:ALITAS_BASE, sabores:SABORES, mitad:true},
  {cat:"Extras", nombre:"Salsa mango habanero", precio:10, extra:true},
  {cat:"Extras", nombre:"Salsa tamarindo", precio:10, extra:true},
  {cat:"Extras", nombre:"Crema parmesano", precio:10, extra:true},
  {cat:"Extras", nombre:"Salsa BBQ", precio:10, extra:true},
  {cat:"Extras", nombre:"Aderezo ranch", precio:10, extra:true},
  {cat:"Producto de la semana", nombre:"Hamburguesa Flamin'Hot + Papas", precio:115,
    toppings:["Mayonesa con chipotle","Queso Chihuahua","Catsup","Lechuga","Mostaza","Cebolla caramelizada","Tocino","Salsa de queso","Cheetos Flaming Hot"]},
  {cat:"Producto de la semana", nombre:"Doriburguer Crunch", precio:115,
    toppings:["Mayonesa","Catsup","Mostaza","Lechuga","Chiles jalapeño","Cebolla caramelizada","Queso Oaxaca","Guacamole","Aderezo Ranch","Doritos Nacho"]},
];

let cart=[];

/* ================== RENDER MENÚ ================== */
function chip(label, id){ return `<label class="chip"><input type="checkbox" id="${id}" value="${label}"> ${label}</label>` }

function renderMenu(){
  const $menu = document.getElementById('menu');
  $menu.innerHTML = "";

  const cats = [...new Set(MENU.map(i=>i.cat))];
  cats.forEach(cat=>{
    const block = document.createElement('div');
    block.className="block card__section";
    block.innerHTML = `<h3 class="title">${cat}</h3>`;
    const items = MENU.filter(i=>i.cat===cat);
    items.forEach((item, idx)=>{
      const row = document.createElement('div'); row.className="row";
      const idxGlobal = MENU.indexOf(item);

      // izquierda (info + opciones)
      const left = document.createElement('div');
      left.innerHTML = `
        <div style="font-weight:700">${item.nombre}</div>
        ${item.toppings?.length ? `<div class="muted">Elige tus ingredientes</div>
        <div class="chips">${item.toppings.map((t,i)=>chip(t,`t_${idxGlobal}_${i}`)).join("")}</div>`:""}
        ${item.sabores ? `
          <div class="muted" style="margin-top:6px">Sabor(es)</div>
          <div class="chips">
            ${item.sabores.map((s,i)=>chip(s,`s_${idxGlobal}_${i}`)).join("")}
          </div>
          ${item.mitad ? `<div class="chips" style="margin-top:6px">
             <label class="chip"><input type="checkbox" id="half_${idxGlobal}"> Mitad y mitad (elige 2 sabores)</label>
          </div>`:""}
        `:""}
      `;

      // precio
      const price = document.createElement('div');
      price.className="price";
      price.textContent = money(item.precio);

      // cantidad + botón
      const cta = document.createElement('div');
      cta.innerHTML = `
        <input class="qty" id="q_${idxGlobal}" type="number" min="1" value="1">
        <button class="btn" id="add_${idxGlobal}">Agregar</button>
      `;

      row.appendChild(left); row.appendChild(price); row.appendChild(cta); block.appendChild(row);

      // evento agregar
      setTimeout(()=>{
        document.getElementById(`add_${idxGlobal}`).onclick = ()=>{
          const qty = Math.max(1, parseInt(document.getElementById(`q_${idxGlobal}`).value||"1",10));
          const toppings = (item.toppings||[]).filter((t,i)=>document.getElementById(`t_${idxGlobal}_${i}`)?.checked);
          let sabores = [];
          if(item.sabores){
            sabores = item.sabores.filter((s,i)=>document.getElementById(`s_${idxGlobal}_${i}`)?.checked);
            const half = document.getElementById(`half_${idxGlobal}`)?.checked;
            if(half){
              // fuerza máximo dos sabores
              sabores = sabores.slice(0,2);
              if(sabores.length===1) sabores.push("(mitad clásica)");
              if(sabores.length===0) sabores = ["Mitad 1","Mitad 2"];
            }
          }
          cart.push({nombre:item.nombre, precio:item.precio, qty, toppings, sabores, extra:item.extra===true});
          renderCart();
          window.scrollTo({top:0,behavior:'smooth'});
        };
      });
    });
    $menu.appendChild(block);
  });
}

/* ================== CARRITO ================== */
function renderCart(){
  const $c = document.getElementById('cart');
  $c.innerHTML = "";
  let total = 0;

  if(cart.length===0){
    $c.innerHTML = `<p class="muted">Tu carrito está vacío.</p>`;
    document.getElementById('subtotal').textContent = money(0);
    return;
  }

  cart.forEach((it, i)=>{
    total += it.precio * it.qty;
    const div = document.createElement('div');
    div.className = "cart-row";
    const det = [];
    if(it.toppings?.length) det.push(it.toppings.join(", "));
    if(it.sabores?.length) det.push("Sabores: " + it.sabores.join(" / "));
    div.innerHTML = `
      <div>
        <div><b>${it.qty}× ${it.nombre}</b></div>
        ${det.length? `<div class="muted">${det.join(" · ")}</div>`:""}
      </div>
      <div class="mini">
        <button class="iconbtn" onclick="chg(${i},-1)">–</button>
        <button class="iconbtn" onclick="chg(${i},+1)">+</button>
        <button class="iconbtn" onclick="delItem(${i})">✕</button>
        <b>${money(it.precio*it.qty)}</b>
      </div>
    `;
    $c.appendChild(div);
  });
  document.getElementById('subtotal').textContent = money(total);
}
function chg(i, d){ cart[i].qty = Math.max(1, cart[i].qty + d); renderCart(); }
function delItem(i){ cart.splice(i,1); renderCart(); }

/* ================== WHATSAPP ================== */
function toWhats(){
  if(cart.length===0){ alert("Tu carrito está vacío"); return; }

  const nombre = document.getElementById('nombre').value.trim();
  const direccion = document.getElementById('direccion').value.trim();
  const zona = document.getElementById('zona').value;
  const cuando = document.getElementById('cuando').value;
  const pago = [...document.querySelectorAll('input[name="pago"]')].find(r=>r.checked)?.value || "transferencia";
  const notas = document.getElementById('notas').value.trim();

  if(!nombre || !direccion || !zona){ alert("Completa nombre, dirección y zona."); return; }
  if(zona==="Otra") document.getElementById('zonaWarn').style.display = "block";
  else document.getElementById('zonaWarn').style.display = "none";

  const lines = [];
  lines.push("Nuevo pedido — Capialitas Jaz");
  lines.push("────────────────────────");
  cart.forEach((it, idx)=>{
    lines.push(`${idx+1}. ${it.qty}× ${it.nombre} — ${money(it.precio*it.qty)}`);
    if(it.toppings?.length) lines.push(`   · ${it.toppings.join(", ")}`);
    if(it.sabores?.length)  lines.push(`   · ${it.sabores.join(" / ")}`);
  });
  const total = cart.reduce((s,i)=>s+i.precio*i.qty,0);
  lines.push("────────────────────────");
  lines.push(`Subtotal: ${money(total)}`);

  lines.push("");
  lines.push(`Cliente: ${nombre}`);
  lines.push(`Dirección: ${direccion}`);
  lines.push(`Zona: ${zona}${zona==="Otra"?" (posible fuera de zona)":""}`);

  let avisoHorario = "";
  let fechaStr = "";
  if(cuando){
    const d = new Date(cuando);
    fechaStr = d.toLocaleString("es-MX");
    if(!isServiceOpen(d)) avisoHorario = " (fuera de horario; pedido sobre pedido)";
  }
  if(fechaStr) lines.push(`Entrega: ${fechaStr}${avisoHorario}`);

  if(notas) lines.push(`Notas: ${notas}`);

  lines.push("");
  lines.push(`Pago: ${pago==="transferencia" ? "Transferencia" : "Mitad transferencia / mitad efectivo"}`);

  const text = encodeURIComponent(lines.join("\n"));
  window.open(`https://wa.me/${SELLER_WA}?text=${text}`, "_blank");
}

/* ================== INIT ================== */
document.getElementById("logo").src = LOGO_DATA_URI;
renderMenu();
renderCart();
document.getElementById('whatsBtn').onclick = toWhats;
</script>
</body>
</html>
